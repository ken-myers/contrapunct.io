<!DOCTYPE html>
<html>

<head>
    <title>contrapunct.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div id="helpscreen" class = "d-none">
        <div id = "help-text-container">
        <a id = "closebutton">X</a>
        <p>welcome to contrapunct.io!</p>
            <p>to begin composing a countermelody, upload a midi file of your cantus firmus. as per the conventions of species counterpoint, the cantus firmus must diatonic to a major or minor scale (no accidentals), and must contain no rhythmic variation (e.g. only whole notes).</p>
            <p>next, input the desired output tempo, the key your cantus firmus is written in and if it's minor or not, the desired species of the countermelody, and click submitâ€”your countermelody will generate shortly.</p>
            
            <p>just want a quick demo? click below to compose a third species countermelody for pachelbel's canon.
            </p>
            <div id="demoplayer-line">
                <div><p>(the canon sounds like this pre-countermelody: </p></div>
                <div><midi-player id="demoplayer" sound-font="https://storage.googleapis.com/magentadata/js/soundfonts/salamander" src = "./pachelbel.mid"></midi-player></div>
                <div><p>)</p></div>
            </div>
            <a id="demolink">click here for a demo</a>
        </div>
    </div>
    <div id = 'headerwrapper'>
    <div id="headers">
        <h1 class="mainheader">
            contrapunct.io
        </h1>
        <h4 class="subheader">midi countermelody generator</h4>
        <hr style="width:14em;margin:auto;margin-top:1em;">
    </div>
    </div>
    <div id="flexwrapper">
    <div id="mainwrapper">
    <div id="maintainer">
        <form>
            <div>
                <label id="filelabel" class = "textbutton" for="file">upload a midi file</label>
                <input id="file" type="file">
            </div>
            <div id="infoRow">
                <input style="width:3.8em" type="number" id="tempo" placeholder="BPM">
                <select id="key">
                    <option value="-1" selected>key</option>
                    <option value="0">C</option>
                    <option value="1">C#/Db</option>
                    <option value="2">D</option>
                    <option value="3">D#/Eb</option>
                    <option value="4">E</option>
                    <option value="5">F</option>
                    <option value="6">F#/Gb</option>
                    <option value="7">G</option>
                    <option value="8">G#/Ab</option>
                    <option value="9">A</option>
                    <option value="10">A#/Bb</option>
                    <option value="11">B</option>
                </select>
                <div class="form-element">
                    <input type="checkbox" id="minor">
                    <label for="minor">minor?</label>
                </div>
                <select id="species">
                    <option value="-1" selected>species</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </div>
            <button id="submit" type="submit" disabled>submit</button>
            <div id ="collapser" class = "d-none">
                <div id="alert">
                    <p id="alertText"></p>
                </div>
                <midi-player class="d-none" id="player" sound-font="https://storage.googleapis.com/magentadata/js/soundfonts/salamander">
                </midi-player>
            </div>
        </form>
        <hr style = "width:8em;margin-top:2.75em;">
        <a id = "helpbutton">help/demo</a>
    </div>
    </div>
    </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>
    <script src="https://colxi.info/midi-parser-js/src/main.js"></script>
    <script src="main.js"></script>
</body>

</html>